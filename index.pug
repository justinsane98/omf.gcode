doctype html
html
head
title PPP - Pixel Plotting Program
link(href="css/main.css" rel="stylesheet")
script(src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous")
script(src="index.js")
script.
  $(document).ready(function() {
    $('.action-generate-gcode').on("click",function(e) {
      e.preventDefault();
      output();
    });
    $('.action-copy-gcode').on("click",function(e) {
      e.preventDefault();
      var t = $('#textarea-output')
      t.select();
      document.execCommand("copy");
    });
    $('.config-lift-distance').on("change", function(e){
      $('.config-lift-distance-label').text("("+this.value+"mm)");
    });
    
    $('.stat-color').on("click", function(e){
      clear_canvas();
      $('.stats > li').removeClass('enabled');
      $(this).addClass('enabled');
      add_to_canvas($(this).children('.stat-color-name').text(), PIXELS[$(this).children('.stat-color-name').text()]);
    });
    
    $('.show-all').on("click", function(e){
      clear_canvas();
      $('.stats > li').removeClass('enabled');
      $(this).addClass('enabled');
      Object.keys(PIXELS).forEach(function(color, i) {
          add_to_canvas(color, PIXELS[color]);
      });
    });
    
    $('.action-add-image').on("click", function(e){
      e.preventDefault();
      clear_canvas();
      add_image_to_canvas(e);
    });
    init();
  });
  
body
  header
    nav.row
      div.logo ppp
      div
        button.action-add-image Add Image
      div
        button.action-generate-gcode Generate Gcode
      div
        button.action-copy-gcode Copy Gcode
        
  .row
    .guide
      h2 How to add an image:
      ol
        li Select an image from your computer
        li Set desired height and width
        li Choose the color palette
        li Click "Add image"
      h2 How to generate Gcode:
      ol
        li Select the data source
        li Set desired pixel size
        li Choose the fill pattern
        li Tweak the lift distance
        li Click "Generate Gcode"
      h2 What to do with the Gcode:
      ol
        li ...
    .dev-config
      h2 Config:
      form.config-form
        ul.config-list
          li.config-option
            label Height
              small=" (px)"
            input.config-height(value="200" placeholder="height")
            label Width
              small=" (px)"
            input.config-width(value="200" placeholder="width")
          li.config-option
            label Palette
              small=" (color #)"
            select.config-palette
              option(selected) Full Color
              option(disabled) 92
              option(disabled) 64
              option(disabled) 32
          li.config-option
            label Image
              small=" (.jpg)"
            input.config-image(value="" type="file")
      form.config-form
        ul.config-list
          li.config-option
            label JSON file
            input.config-json(value="pixels.json")
          li.config-option
            label Pixel Size 
              small (mm)
            input.config-size(value=4)

          li.config-option
            label Pixel Fill Pattern 
            select.config-fill
              option(disabled) zizag 
              option(disabled) x
              option(selected) border
          
          li.config-option
            label Lift Distance 
              small.config-lift-distance-label (3mm)
            input.config-lift-distance(value="3" type="range" min="2" max="10" step="1")
    div.output.column
      .visual-output.row
        canvas#canvas-output(width=200 height=200)
        ul.stats
          li.show-all.enabled show all
          - for(var i = 0; i < 50; i++)
            li(class="row stat-color stat-color-"+i data-index=i)
              span(class="stat-color-swatch stat-color-"+i+"-swatch")
              span(class="stat-color-length stat-color-"+i+"-length")
              span(class="stat-color-name stat-color-"+i+"-name")
      .gcode-output
        textarea#textarea-output

  script(src="//localhost:35729/livereload.js")
